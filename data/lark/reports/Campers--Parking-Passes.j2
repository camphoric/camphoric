{%- set parking_short = {
	"Long Term": "LT",
	"Vehicle Camp 1": "V1",
	"Vehicle Camp 2": "V2",
	"Vehicle Camp 3": "V3",
	"Short Term": "ST",
	"Camp 1": "C1",
	"Camp 2": "C2",
	"Camp 3": "C3",
	"Park Anywhere": "PA",
} -%}
{%- set session_short = {
	"Full camp": "F",
	"Half camp - 1st half": "A",
	"Half camp - 2nd half": "B",
} -%}
{%- set session_display = {
	"Full camp": "Full",
	"Half camp - 1st half": "1st½",
	"Half camp - 2nd half": "2nd½",
} -%}
id,last,first,reg,type,paid,session,lodging,url,code,session_display
{% for camper in campers | sort(attribute='attributes.last_name,attributes.first_name') -%}
	{%- set _ = camper.update({'reg': registrationLookup[camper.registration | string]}) -%}
	{%- set _ = camper.update({'pts': lodgingLookup[camper.lodging | string] if lodgingLookup[camper.lodging | string] }) -%}
	{%- set _ = camper.update({'ldg': camper.pts.pathParts | join('→') if camper.pts else ''}) -%}
	{%- set _ = camper.update({'lodging_short': camper.ldg or ''}) -%}
	{%- for l in ['A','B','C','D','E','F','G','H','I','J','K','L','M'] -%}
		{%- set _ = camper.update({'lodging_short': camper.lodging_short | replace('Tent→Area ' + l + '→Spot ', 'Tnt')}) -%}
	{%- endfor -%} 
	{%- set _ = camper.update({'lodging_short': camper.lodging_short | replace('Camp ', 'C')}) -%}
	{%- set _ = camper.update({'lodging_short': camper.lodging_short | replace('Cabin→', '')}) -%}
	{%- set _ = camper.update({'lodging_short': camper.lodging_short | replace('RV under 15\' long→Spot ', '')}) -%}
	{%- set _ = camper.update({'lodging_short': camper.lodging_short | replace('RV 15\'-20\' long→Spot ', '')}) -%}
	{%- set _ = camper.update({'lodging_short': camper.lodging_short | replace('RV over 20\' long (call ahead)→Spot ', '')}) -%}
	{%- set _ = camper.update({'lodging_short': camper.lodging_short | replace('RV→', '')}) -%}
	{%- set _ = camper.update({'lodging_short': camper.lodging_short | replace('Cooks Cabin', 'Cook')}) -%}
	{%- set _ = camper.update({'lodging_short': camper.lodging_short | replace('Cabin ', 'Cbn')}) -%}
	{%- set _ = camper.update({'full_name': (camper.attributes.last_name ~ ", " ~	camper.attributes.first_name) | replace('"', '""') }) -%}
	{%- set _ = camper.update({'short_name': (camper.attributes.last_name ~ "," ~	camper.attributes.first_name) | replace('"', '""') }) -%}
	{%- set _ = camper.update({'parking_paid': camper.reg.server_pricing_results.parking > 0 }) -%}
	{%- set _ = camper.update({'crew': registrationTypeLookup[camper.reg.registration_type | string].name if camper.reg.registration_type else '' }) -%}
	{%- set _ = camper.update({'is_vehicle_camping': ''}) -%}
	{%- set _ = camper.update({'is_vehicle_camping': None if i == 1 and (camper.attributes.parking_passes | count) > 1 else camper.is_vehicle_camping}) -%}
{%- for parking_pass in camper.attributes.parking_passes | sort(attribute='pass_type') -%}	
	{%- set i = loop.index -%}
	{{- camper.id ~ '-' ~ i }},
	{{- '"' ~ (camper.attributes.last_name | replace('"', '""')) }}",
	{{- '"' ~ (camper.attributes.first_name | replace('"', '""')) }}",
	{{- camper.crew }},
	{{- parking_short[parking_pass.pass_type] }},
	{{- '$' if camper.parking_paid else '' }},
	{{- camper.attributes.session }},
	{{- camper.lodging_short }},
	{{- '"larkadmin://registration/' + (camper.id | string) }}","
	{{- camper.short_name }};
	{{- session_short[camper.attributes.session] }};
	{{- camper.lodging_short }}",
	{{- session_display[camper.attributes.session] }}
{% endfor -%}
{% endfor -%}